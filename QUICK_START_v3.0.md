# v3.0 快速开始指南 🚀

## 欢迎使用全新的v3.0！

本次更新是一次**完整的重新设计**，带来了7大核心功能升级。

---

## 🎯 核心改进一览

| 功能 | v2.x | v3.0 |
|------|------|------|
| 辅导界面 | 单栏对话 | 左右分栏（方案+对话） |
| 调整流程 | AI直接执行 | 询问→提议→确认 |
| 进度保持 | ❌ 会重置 | ✅ 永不重置 |
| 方案预览 | ❌ 无 | ✅ 实时预览 |
| 删除记录 | ❌ 无 | ✅ 带确认 |
| 昵称编辑 | ❌ 无 | ✅ 支持 |
| 主页昵称 | ❌ 固定文本 | ✅ 动态显示 |

---

## 🚀 立即体验

### 1. 打开应用
在浏览器中打开 `index.html`

### 2. 设置昵称（新功能）
- 进入"个人中心"
- 点击昵称旁的"✏️ 编辑"
- 输入你的昵称，例如"小明"
- 返回主页，会显示"你好，小明！"

### 3. 开始辅导对话
- 选择一个能力或创建新能力
- 点击"阶段辅导"
- 查看左侧的"当前方案"面板
- 在右侧与AI对话

### 4. 调整学习计划（重点功能）

**旧方式（v2.x）：**
```
你："改成30天"
AI："好的" → 直接执行 → 进度重置❌
```

**新方式（v3.0）：**
```
你："我想调整计划"
  ↓
AI："遇到什么问题了？"
  ↓
你："太快了，想多点时间"
  ↓
AI："具体哪个阶段太快了？"
  ↓
你："第二阶段，想延长到40天"
  ↓
AI："建议这样调整..." [提供详细方案]
  ↓
💡 左侧显示新方案预览（黄色背景）
  ↓
你："看起来不错，确认吧"
  ↓
AI："已应用！" ✅
  ↓
✨ 进度保持！第3天 / 共40天（不是第1天）
```

---

## 📋 完整测试流程

### 第1步：创建能力
1. 点击"开始新能力"
2. 进行能力访谈
3. 填写问卷
4. 继续对话
5. 生成21天方案

### 第2步：第一次打卡
1. 进入"今日任务"
2. 完成打卡（第1天）
3. 查看进度：第2天 / 共21天

### 第3步：调整计划
1. 进入"阶段辅导"
2. 查看左侧方案：第2天 / 共21天
3. 输入："我想调整计划，感觉太快了"
4. AI询问详情，回复你的具体需求
5. AI提议新方案，左侧显示预览
6. 查看预览，告诉AI"确认"
7. ✅ 方案更新：第2天 / 共30天（进度保持）

### 第4步：验证同步
1. 返回主页 → 显示：第2天 / 30天 ✅
2. 进入个人中心 → 显示：第2天 / 30天 ✅
3. 进入今日任务 → 显示：第2天 / 30天 ✅

### 第5步：删除记录
1. 在辅导页面点击"🗑️ 删除记录"
2. 确认删除
3. 返回辅导列表

### 第6步：编辑昵称
1. 进入个人中心
2. 点击"✏️ 编辑"
3. 输入新昵称
4. 查看主页更新

---

## 🎨 UI/UX亮点

### 左右分栏布局
```
┌─────────────────────────────────────────┐
│  ← 返回    阶段辅导    10月24日  🗑️ 删除  │
├───────────────┬─────────────────────────┤
│ 📋 当前方案   │                         │
│               │   AI：你好！我看到...    │
│ 第3天 / 共21天│                         │
│               │   你：我想调整计划       │
│ 【方案详情】  │                         │
│ ✓ 阶段1(7天) │   AI：好的，你遇到...   │
│ ✓ 阶段2(7天) │                         │
│ • 阶段3(7天) │   你：太快了            │
│               │                         │
│ [讨论修改方案]│   [输入框]  [发送]      │
└───────────────┴─────────────────────────┘
```

### 方案预览效果
当AI提议新方案时，左侧面板会变成黄色预览：
```
┌───────────────────────────┐
│ 📋 新方案预览              │  ← 黄色背景
│ 这是AI为你生成的新方案     │
├───────────────────────────┤
│ 总天数：35天              │
│ 当前进度：第3天 / 35天    │  ← 进度保持
│ 已完成：2天               │
└───────────────────────────┘
```

---

## 🔑 关键概念

### 1. currentDay（当前天数）
- **含义**：你现在处于学习的第几天
- **重要性**：调整计划时，这个数字永远不会变
- **示例**：第3天调整后，还是第3天

### 2. totalDays（总天数）
- **含义**：整个学习计划的总天数
- **可调整**：可以通过AI辅导调整
- **示例**：从21天延长到35天

### 3. proposedPlan（提议的方案）
- **含义**：AI提议但未应用的新方案
- **状态**：临时存储，左侧黄色预览
- **应用**：用户确认后才正式应用并清除

### 4. planAdjustments（调整历史）
- **含义**：记录所有方案调整的历史
- **内容**：日期、类型、旧天数、新天数、原因
- **用途**：可追溯所有调整记录

---

## 💡 使用技巧

### 调整计划时
1. **先说明问题**："我觉得太快了"
2. **具体说明哪里**："第二阶段任务太重"
3. **提出想法**："希望延长到40天"
4. **查看预览**：左侧方案变黄色
5. **确认或调整**："可以" 或 "再调整一下"

### 与AI对话
- 💬 自然对话，不要只说"延长"
- 💬 说明理由，AI会给更好的建议
- 💬 查看预览，不满意可以再调整
- 💬 明确确认，说"好的"、"就这样"等

### 数据管理
- 📊 定期查看个人中心
- 📊 查看调整历史
- 📊 导出日记（未来功能）
- 📊 备份重要数据

---

## ⚠️ 注意事项

### 进度问题
- ✅ 调整后进度保持不变
- ✅ 只是总天数改变
- ✅ 已打卡天数不受影响
- ❌ 不会从第1天重新开始

### 删除操作
- ⚠️ 删除辅导记录后无法恢复
- ⚠️ 删除能力后所有数据清空
- ✅ 所有删除都有二次确认

### 数据保存
- 💾 自动保存到浏览器LocalStorage
- 💾 清除浏览器数据会丢失
- 💾 更换浏览器数据不同步
- 💾 建议定期手动备份

---

## 🐛 常见问题

### Q1: 调整后进度变成了第1天？
**A:** v3.0已修复此问题。确保你使用的是最新版本。

### Q2: AI直接执行了调整，没有预览？
**A:** 请检查API提示词是否为v3.0版本。应该使用`[PROPOSE_PLAN]`而不是`[ADJUST_DAYS]`。

### Q3: 左侧没有显示方案面板？
**A:** 检查HTML是否包含`planPanelContent`和`planProgressInfo`元素。

### Q4: 昵称修改后主页没有更新？
**A:** 刷新页面后应该显示。如果仍未更新，检查`loadHomePage()`方法。

### Q5: 删除按钮点击没反应？
**A:** 检查浏览器控制台是否有错误，确认`confirmDeleteCoachingSession()`方法存在。

---

## 📱 响应式支持

### 桌面端（>1024px）
- 左右分栏
- 方案面板固定宽度400px
- 对话区域自适应

### 平板端（768px-1024px）
- 自动切换为上下布局
- 方案面板在上，最大高度400px
- 对话面板在下，占据剩余空间

### 手机端（<768px）
- 垂直堆叠
- 头部按钮自适应换行
- 触摸优化

---

## 🎓 开发者提示

### 关键方法调用顺序
```javascript
// 进入辅导页面
startCoachingConversation(ability)
  ↓
displayCurrentPlan()  // 显示左侧方案
  ↓
addCoachingMessage('assistant', greeting)

// 调整方案
sendCoachingMessage()  // 用户发送消息
  ↓
AI response with [PROPOSE_PLAN]
  ↓
showProposedPlan(planData)  // 显示黄色预览
  ↓
用户确认
  ↓
AI response with [CONFIRM_PLAN]
  ↓
confirmProposedPlan()  // 正式应用
  ↓
displayCurrentPlan()  // 更新显示
refreshAllViews()  // 同步所有页面
```

### 数据流
```
用户输入 → sendCoachingMessage()
  ↓
调用API → coachingSession()
  ↓
AI回复 → 解析指令
  ↓
执行相应操作 → showProposedPlan() / confirmProposedPlan()
  ↓
保存数据 → saveAbilities()
  ↓
刷新视图 → displayCurrentPlan() + refreshAllViews()
```

---

## 📚 相关文档

- `UPDATE_v3.0_COMPLETE_REDESIGN.md` - 详细设计文档
- `TESTING_v3.0.md` - 完整测试指南
- `CHANGELOG_v3.0.md` - 更新日志
- `IMPLEMENTATION_SUMMARY_v3.0.md` - 实现总结

---

## 🎉 开始使用

1. ✅ 打开 `index.html`
2. ✅ 设置昵称
3. ✅ 创建能力
4. ✅ 进行辅导
5. ✅ 调整计划
6. ✅ 享受全新体验！

---

**v3.0 - 让成长更科学，让调整更智能！** 🚀

祝你使用愉快！如有问题，请查看详细文档或反馈给开发团队。


